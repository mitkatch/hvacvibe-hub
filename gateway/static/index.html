<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=320, initial-scale=1.0">
  <title>HVAC-Vibe</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>

  <!-- ═══════════════════════════════════════════
       MAIN VIEW  — live dashboard
  ════════════════════════════════════════════ -->
  <div id="view-main" class="view active">

    <header>
      <span class="app-title">HVAC-Vibe</span>
      <span id="sensor-name" class="sensor-name">UNIT-01</span>
      <span id="conn-dot" class="conn-dot connected"></span>
      <span id="conn-label" class="conn-label">Connected</span>
      <span id="signal-bars" class="signal-bars">
        <span class="bar b1"></span>
        <span class="bar b2"></span>
        <span class="bar b3"></span>
        <span class="bar b4"></span>
      </span>
      <span id="rssi-val" class="rssi-val">-65dBm</span>
      <span id="battery" class="battery">
        <span id="bat-fill" class="bat-fill" style="width:78%"></span>
        <span class="bat-tip"></span>
      </span>
      <span id="bat-pct" class="bat-pct">78%</span>
      <span id="alarm-badge" class="alarm-badge hidden">! ALARM</span>
      <span id="clock" class="clock">00:00:00</span>
      <button class="btn-gear" onclick="App.showSetup()" title="Setup">&#9881;</button>
    </header>

    <div class="tiles">
      <div class="tile" id="tile-rms">
        <div class="tile-label">VIB RMS</div>
        <div class="tile-value"><span id="val-rms">0.420</span><span class="tile-unit">g</span></div>
      </div>
      <div class="tile" id="tile-peak">
        <div class="tile-label">PEAK</div>
        <div class="tile-value"><span id="val-peak">1.09</span><span class="tile-unit">g</span></div>
      </div>
      <div class="tile" id="tile-temp">
        <div class="tile-label">TEMP</div>
        <div class="tile-value"><span id="val-temp">24.3</span><span class="tile-unit">°C</span></div>
      </div>
      <div class="tile" id="tile-hum">
        <div class="tile-label">HUMIDITY</div>
        <div class="tile-value"><span id="val-hum">52.1</span><span class="tile-unit">%RH</span></div>
      </div>
    </div>

    <div class="chart-area">
      <div class="chart-yaxis" id="chart-yaxis"></div>
      <div class="chart-wrap">
        <canvas id="chart-canvas"></canvas>
      </div>
    </div>

  </div><!-- #view-main -->


  <!-- ═══════════════════════════════════════════
       SETUP VIEW  — wifi / ble / status
  ════════════════════════════════════════════ -->
  <div id="view-setup" class="view">

    <header>
      <span class="app-title">HVAC-Vibe</span>
      <span class="setup-title">Setup</span>
      <button class="btn-main-link" onclick="App.showMain()">← Main</button>
    </header>

    <nav class="tab-bar">
      <button class="tab active" data-tab="wifi"   onclick="Setup.switchTab('wifi')">WiFi</button>
      <button class="tab"        data-tab="ble"    onclick="Setup.switchTab('ble')">BLE</button>
      <button class="tab"        data-tab="status" onclick="Setup.switchTab('status')">Status</button>
    </nav>

    <!-- WiFi Tab -->
    <div id="tab-wifi" class="tab-content active">
      <div id="wifi-list" class="list-panel">
        <div class="list-empty">Tap Scan to find networks</div>
      </div>
      <div class="tab-footer">
        <span id="wifi-status" class="status-msg"></span>
        <button class="btn-action" onclick="Setup.wifiScan()">Scan</button>
      </div>
    </div>

    <!-- BLE Tab -->
    <div id="tab-ble" class="tab-content">
      <div id="ble-list" class="list-panel">
        <div class="list-empty">Tap Scan to find HVACVIBE sensors</div>
      </div>
      <div class="tab-footer">
        <span id="ble-status" class="status-msg"></span>
        <button class="btn-action" onclick="Setup.bleScan()">Scan</button>
      </div>
    </div>

    <!-- Status Tab -->
    <div id="tab-status" class="tab-content">
      <div class="status-section">
        <div class="status-heading">WiFi</div>
        <div id="status-wifi" class="status-row">
          <span class="status-dot grey"></span>
          <span class="status-text">Checking...</span>
        </div>
      </div>
      <div class="status-divider"></div>
      <div class="status-section">
        <div class="status-heading">BLE Sensors</div>
        <div id="status-ble-list"></div>
      </div>
    </div>

  </div><!-- #view-setup -->


  <!-- ═══════════════════════════════════════════
       ON-SCREEN KEYBOARD  (overlay)
  ════════════════════════════════════════════ -->
  <div id="keyboard-overlay" class="keyboard-overlay hidden">
    <div class="kbd-prompt">
      <span>Password for: </span>
      <strong id="kbd-ssid-label"></strong>
    </div>
    <div class="kbd-field">
      <span id="kbd-input-display"></span><span class="kbd-cursor">|</span>
    </div>
    <div id="keyboard" class="keyboard"></div>
  </div>

  <script src="/static/app.js"></script>
  <script src="/static/dashboard.js"></script>
  <script src="/static/setup.js"></script>
</body>
</html>
